{% extends 'beagent/base.html' %}
{% load query_string %}
{% block title %}
    ba-agent-soobshenia
{% endblock %}
{% block content %}
			<div class="content fixsize clearfix">
				<nav class="breadcrumbs">
					<ul>
						<li><a href="{% url 'beagent.views.common.profile' %}">Кабинет</a></li>
					</ul>
				</nav>
				<h1>Сообщения</h1>
				<nav class="menu-l3">
					<ul class="clearfix">
						<li class="active"><a href="{% url 'beagent.views.common.profile_messages' %}">События</a></li>
						<li><a href="{% url 'beagent.views.common.profile_ask_question' %}">Задать вопрос</a></li>
					</ul>
				</nav>
				<section class="table-box">
					<table class="table-messages">
						<thead>
							<tr>
								<th>Дата</th>
								<th>Раздел</th>
								<th>Событие</th>
							</tr>
						</thead>
						<tbody>
                        {% for item in list %}
                            {% if item.watched == 1 %}
                                <tr>
                            {% else %}
                                <tr class="unread">
                            {% endif %}
                            <td>{{ item.date_added }}</td>
                            <td>{{ item.get_section_display }}</td>
                            {% if item.section == 'admin' %}
                                <td><a href="{% url 'beagent.views.common.profile_view_admin_message' %}{% query_string '?id=0' id=item.pk %}" class="toverflow">{{ item.title }}</a></td>
                            {% else %}
                                <td><a href="{% url 'beagent.views.common.profile_view_message' %}{% query_string '?id=0' id=item.pk %}" class="toverflow">{{ item.title }}</a></td>
                            {% endif %}
                        {% endfor %}
						</tbody>
					</table>
				</section>
                <section class="paginator-box">
                    {% for pagination_list_item in pagination_list %}
                        {% if not pagination_list_item %}
                            <li class="dots"><a href="#">...</a></li>
                        {% else %}
                            <li {% if pagination_page == pagination_list_item %}class="active"{% endif %}>
                                <a href="{% url pages %}?page={{ pagination_list_item }}{% if request.GET.search %}&search={{ request.GET.search }}{% endif %}">{{ pagination_list_item }}</a>
                            </li>
                        {% endif %}
                    {% endfor %}

                    <a href="{% url 'beagent.views.common.profile_messages' %}{% query_string '?page=a&per_page=10' page=pag.pageBackForward.back per_page=request.GET.per_page %}" class="paginator-navi back"><span>Предыдущая</span></a>
                    <a href="{% url 'beagent.views.common.profile_messages' %}{% query_string '?page=a&per_page=10' page=pag.pageBackForward.forward per_page=request.GET.per_page %}" class="paginator-navi next"><span>Следующая</span></a>

                    <ul class="paginator">
                        <li>Страница:</li>
                        {% for item in pag.pagging_pages %}
                            {% if item == pag.page%}
                                <li class='active'><a href="{% url 'beagent.views.common.profile_messages' %}{% query_string '?page=a&per_page=10' page=item per_page=request.GET.per_page %}">
                                    {% if not item %}
                                        ..
                                    {% else %}
                                        {{ item }}
                                    {% endif %}
                                </a></li>
                            {% else %}
                                <li><a href="{% url 'beagent.views.common.profile_messages' %}{% query_string '?page=m&per_page=10' page=item per_page=request.GET.per_page %}">
                                    {% if not item %}
                                        ..
                                    {% else %}
                                        {{ item }}
                                    {% endif %}
                                </a></li>
                            {% endif %}
                        {% endfor %}
                    </ul>
                    <span class="paginator-options">
                        <div class="on-page">На странице: </div>
                        <div class="paginated-pages">
                            <a class="paginator-view">
                                <span>
                                    <div class="dropdown">
                                        <a id="drop4" class="dropdown-toggle" data-toggle="dropdown" role="button">{{ pag.per_page }} элементов<b class="caret"></b></a>
                                        <ul id="menu1" class="dropdown-menu" aria-labelledby="drop4" role="menu">
                                            <li><a href="{% url 'beagent.views.common.profile_messages' %}{% query_string '?page=1&per_page=5' %}" tabindex="-1">5 элементов</a></li>
                                            <li><a href="{% url 'beagent.views.common.profile_messages' %}{% query_string '?page=1&per_page=10' %}" tabindex="-1">10 элементов</a></li>
                                            <li><a href="{% url 'beagent.views.common.profile_messages' %}{% query_string '?page=1&per_page=15' %}" tabindex="-1">15 элементов</a></li>
                                            <li><a href="{% url 'beagent.views.common.profile_messages' %}{% query_string '?page=1&per_page=20' %}" tabindex="-1">20 элементов</a></li>
                                        </ul>
                                    </div>
                                </span>
                            </a>
                        </div>
                        <div class="count_elements">/ <strong>{{ count_list }}</strong></div>
                    </span>
                </section>
			</div>
		</div>
{% endblock %}