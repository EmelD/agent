{% extends 'beagent/base.html' %}
{% load query_string %}
{% block title %}
    ba-agent-priglashenia
{% endblock %}
{% block content %}
			<div class="content fixsize clearfix">
				<nav class="breadcrumbs">
					<ul>
						<li><a href="#">Кабинет</a></li>
					</ul>
				</nav>
				<h1>Приглашения</h1>
				<section class="table-box">
					<table class="table-invites">
						<thead>
							<tr>
								<th>Задача</th>
								<th>Площадка</th>
								<th>Заказчик</th>
								<th>Цена, руб</th>
							</tr>
						</thead>
						<tbody>
                        <form id="form">
                            {% for i in result %}
                                <tr>
                                    <td>
                                        <input type="checkbox" class="inp-check" name="campaign" value="{{ i.id }}"/>
                                        <a href="{% url 'beagent.views.agent.profile_view_company' %}" class="title toverflow">{{ i.campaign }}</a>
                                        <span class="desc">{{ i.task }}{% for task in i.task.all %}{{ task.name }} {% endfor %}</span>
                                    </td>
                                    <td>
                                        <span class="title toverflow"><a href="{{ i.platform }}">{{ i.platform }}</a></span>
                                        <span class="desc">{% for type in i.platform_type.all %}{{ type.name }} {% endfor %}</span>
                                    </td>
                                    <td>
                                        <a href="#" class="toverflow">{{ i.sender_name }} {{ i.sender_surname }}</a>
                                        <span class="rating-ico">{{ i.sender_rating }}</span>
                                    </td>
                                    <td>{{ i.balance }}</td>
                                </tr>
                            {% endfor %}
                            {% csrf_token %}
                            <input type="hidden" value="ajax" name="meta">
                        </form>
						</tbody>
					</table>
				</section>
                <section class="paginator-box">
                    {% for pagination_list_item in pagination_list %}
                        {% if not pagination_list_item %}
                            <li class="dots"><a href="#">...</a></li>
                        {% else %}
                            <li {% if pagination_page == pagination_list_item %}class="active"{% endif %}>
                                <a href="{% url pages %}?page={{ pagination_list_item }}{% if request.GET.search %}&search={{ request.GET.search }}{% endif %}">{{ pagination_list_item }}</a>
                            </li>
                        {% endif %}
                    {% endfor %}

                    <a href="{% url 'beagent.views.agent.view_agent_invitations' %}{% query_string '?page=a&per_page=10' page=pag.pageBackForward.back per_page=request.GET.per_page %}" class="paginator-navi back"><span>Предыдущая</span></a>
                    <a href="{% url 'beagent.views.agent.view_agent_invitations' %}{% query_string '?page=a&per_page=10' page=pag.pageBackForward.forward per_page=request.GET.per_page %}" class="paginator-navi next"><span>Следующая</span></a>

                    <ul class="paginator">
                        <li>Страница:</li>
                        {% for item in pag.pagging_pages %}
                            {% if item == pag.page%}
                                <li class='active'><a href="{% url 'beagent.views.agent.view_agent_invitations' %}{% query_string '?page=a&per_page=b' page=item per_page=request.GET.per_page %}">
                                    {% if not item %}
                                        ..
                                    {% else %}
                                        {{ item }}
                                    {% endif %}
                                </a></li>
                            {% else %}
                                <li><a href="{% url 'beagent.views.agent.view_agent_invitations' %}{% query_string '?page=m&per_page=n' page=item per_page=request.GET.per_page %}">
                                    {% if not item %}
                                        ..
                                    {% else %}
                                        {{ item }}
                                    {% endif %}
                                </a></li>
                            {% endif %}
                        {% endfor %}
                    </ul>
                    <span class="paginator-options">
                        <div class="on-page">На странице: </div>
                        <div class="paginated-pages">
                            <a class="paginator-view">
                                <span>
                                    <div class="dropdown">
                                        <a id="drop4" class="dropdown-toggle" data-toggle="dropdown" role="button">{{ pag.per_page }} элементов<b class="caret"></b></a>
                                        <ul id="menu1" class="dropdown-menu" aria-labelledby="drop4" role="menu">
                                            <li><a href="{% url 'beagent.views.agent.view_agent_invitations' %}{% query_string '?page=1&per_page=5' %}" tabindex="-1">5 элементов</a></li>
                                            <li><a href="{% url 'beagent.views.agent.view_agent_invitations' %}{% query_string '?page=1&per_page=10' %}" tabindex="-1">10 элементов</a></li>
                                            <li><a href="{% url 'beagent.views.agent.view_agent_invitations' %}{% query_string '?page=1&per_page=15' %}" tabindex="-1">15 элементов</a></li>
                                            <li><a href="{% url 'beagent.views.agent.view_agent_invitations' %}{% query_string '?page=1&per_page=20' %}" tabindex="-1">20 элементов</a></li>
                                        </ul>
                                    </div>
                                </span>
                            </a>
                        </div>
                        <div class="count_elements">/ <strong>{{ count_list }}</strong></div>
                    </span>
                </section>
				<section class="buttons-change clearfix">
					<div class="buttons-change-l">
						<input type="submit" value="Одобрить" class="button gray-button" onclick="form_send('#form', '{% url 'beagent.views.agent.approve_invitation' %}', undefined, this)"/>
						<input type="submit" value="Отказать" class="button red-button" onclick="form_send('#form', '{% url 'beagent.views.agent.reject_invitation' %}', undefined, this)"/>
					</div>
					<div class="buttons-change-r">
						<p>Всего приглашений на — <span class="big-font">{{ balance }}</span> руб.</p>
					</div>
				</section>
			</div>
		</div>
{% endblock %}
